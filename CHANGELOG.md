# 变更日志 / Changelog

本文档记录了CAJanus项目的所有重要变更。

格式基于[Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循[语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布] - Unreleased

### 计划中
- 添加更多设备指纹识别功能
- 支持更多操作系统平台
- 增强性能监控功能
- 改进用户界面设计

## [1.1.0] - 2025-07-26

### 🔧 修复 Fixed

#### 核心功能修复
- **设备指纹识别**: 修复了 `'WindowsFingerprintManager' object has no attribute 'get_volume_serials'` 错误
  - 统一方法名为 `get_volume_serial_numbers()`
  - 影响文件: `src/ui/fingerprint_widget.py`, `src/ui/backup_widget.py`
- **网络适配器属性**: 修复了 `'NetworkAdapter' object has no attribute 'is_modified'` 和 `'is_enabled'` 错误
  - 移除不存在的 `is_modified` 属性访问
  - 将 `is_enabled` 替换为 `status` 属性
  - 影响文件: `src/ui/fingerprint_widget.py`, `src/ui/backup_widget.py`, `src/ui/mac_address_dialog.py`
- **多线程竞态条件**: 修复了 `'NoneType' object has no attribute 'setLabelText'` 错误
  - 改进了进度对话框的空值检查
  - 添加了异常处理机制
  - 增强了资源清理逻辑

#### 菜单功能修复
- **文件菜单**: 实现了完整的配置文件管理功能
  - 新建配置: 添加了用户确认对话框和配置重置
  - 打开配置: 支持YAML和JSON格式自动识别
  - 保存配置: 支持多种格式导出，YAML格式优先
- **工具菜单**: 完善了系统工具功能
  - 系统信息: 实现了详细的系统信息显示
  - 权限检查: 添加了完整的权限检查报告
- **帮助菜单**: 修复了帮助系统快速链接功能
  - 改进了父控件查找逻辑
  - 完善了"学习资源"帮助内容

#### 设置系统修复
- **配置键值映射**: 修复了UI显示值与存储值不匹配问题
  - 主题映射: `default` ↔ `默认`, `dark` ↔ `深色`
  - 语言映射: `zh_CN` ↔ `简体中文`, `en_US` ↔ `English`
  - 实现了双向映射机制
- **循环导入**: 修复了ConfigManager中的循环导入问题
  - 使用标准logging替代自定义logger

#### 备份系统修复
- **备份历史显示**: 修复了备份目录显示为空的问题
  - 改进了 `load_backup_history()` 方法的控制流
  - 确保表格更新代码总是执行
- **查看备份目录**: 修复了"查看备份"按钮报错问题
  - 使用绝对路径替代相对路径
  - 对Windows系统进行特殊处理（Explorer返回非零码但仍成功）
  - 移除了误导性的错误提示
- **时间处理**: 标准化了备份时间戳处理
  - 支持多种时间戳格式（文件名用/ISO格式/可读格式）
  - 实现了时间解析优先级机制
  - 向后兼容旧格式备份文件

#### 设备指纹功能修复
- **网络适配器刷新**: 修复了刷新功能的空实现问题
  - 实现了完整的适配器列表刷新逻辑
  - 支持父控件数据自动更新
  - 添加了完善的错误处理机制
- **MAC地址恢复**: 修复了恢复功能的占位符实现
  - 实现了完整的原始MAC地址恢复功能
  - 添加了操作确认对话框和风险提示
  - 集成了权限检查和结果反馈
- **GUID恢复**: 修复了GUID恢复功能的占位符实现
  - 实现了智能的GUID恢复策略
  - 支持平台兼容性检查和备份恢复
  - 添加了详细的风险警告和操作指导
- **卷序列号修改**: 修复了卷序列号修改功能的占位符实现
  - 实现了完整的卷序列号修改流程
  - 添加了8位十六进制格式验证
  - 支持平台兼容性检查和操作确认
- **网络适配器显示**: 修复了适配器名称不显示的问题
  - 优化了WMI命令和字段解析逻辑
  - 添加了动态标题行解析和备用获取方法
  - 实现了MAC地址格式标准化
  - 改进了适配器名称的降级处理机制
- **教育功能UI优化**: 统一了操作指导和学习资源的界面风格
  - 将操作指导改为与原理解释一致的树形+分割器布局
  - 将学习资源改为与原理解释一致的树形+分割器布局
  - 优化了内容组织结构，支持Markdown格式展示
  - 提升了内容质量，添加了更多技术细节和最佳实践

### ✨ 新增 Added

#### 备份管理功能
- **删除备份**: 实现了安全的备份文件删除功能
  - 选择验证和文件定位
  - 详细的确认对话框
  - 自动列表刷新
- **快速恢复**: 添加了快速恢复最新备份功能
  - 自动选择最新备份文件
  - 显示备份时间信息
  - 完整的恢复流程
- **导出备份**: 实现了备份文件导出功能
  - 文件选择和路径验证
  - 安全的文件复制
  - 完整性验证

#### 用户界面改进
- **按钮优化**: 改进了按钮命名和功能分离
  - "打开目录" → "查看备份"
  - 添加了"选择目录"按钮用于路径选择
- **详情查看**: 增强了备份详情查看功能
  - 详细的备份信息展示
  - 支持直接打开备份文件
  - 跨平台文件管理器集成

#### Registry备份系统
- **Registry目录说明**: 详细说明了 `backups/registry/` 目录中JSON文件的作用
  - 存储具体的注册表键值对数据
  - 每个文件对应一次注册表操作的备份
  - 支持精确的注册表恢复操作
  - 包含备份ID、时间戳、注册表路径和所有值

### 🔄 变更 Changed

#### 配置文件格式
- **格式优先级**: YAML格式优先，同时支持JSON
- **文件对话框**: 更新了文件过滤器，YAML格式在前
- **向后兼容**: 保持对现有配置文件的兼容性

#### 用户体验
- **操作确认**: 所有危险操作都添加了确认对话框
- **状态反馈**: 改进了操作结果的反馈机制
- **错误提示**: 优化了错误信息的友好性

### 📚 文档 Documentation

#### 新增文档
- **技术修复记录**: 创建了 `docs/technical/bug-fixes-v1.1.0.md`
- **版本更新记录**: 在用户手册中添加了版本更新章节
- **Registry备份说明**: 详细说明了registry目录中JSON文件的作用

#### 文档更新
- **用户手册**: 更新了功能说明和使用指导
- **帮助系统**: 完善了学习资源和参考材料
- **更新日志**: 详细记录了所有修复和改进

## [1.0.0] - 2024-01-15

### 新增 Added
- 🎉 **首次正式发布**
- 🔍 **设备指纹识别功能**
  - 网络适配器信息检测（MAC地址、IP地址、连接状态）
  - 硬件信息收集（CPU、内存、磁盘、机器GUID）
  - 系统信息监控（操作系统、版本、架构）
- 🛡️ **安全修改功能**
  - MAC地址安全修改
  - 机器GUID修改（Windows）
  - 三级确认系统
  - 自动备份保护
- 💾 **备份与恢复系统**
  - 完整系统备份
  - 智能数据恢复
  - 备份历史管理
  - 完整性验证
- 🎨 **现代化用户界面**
  - 基于PyQt5的专业界面
  - 响应式布局设计
  - 多主题支持
  - 无障碍功能支持
- 🌍 **国际化支持**
  - 多语言界面（中文、英文、繁体中文、日语）
  - 本地化日期时间格式
  - 动态语言切换
- 🔧 **跨平台支持**
  - Windows 10+ 完整支持
  - macOS 10.14+ 完整支持
  - Linux (Ubuntu 18.04+) 完整支持
- 📚 **教育功能**
  - 技术原理详细说明
  - 操作指导和最佳实践
  - 学习资源和参考文档
  - 安全使用提醒
- 🧪 **完整测试体系**
  - 单元测试覆盖
  - 集成测试验证
  - 性能测试保证
  - 用户体验测试
- 📖 **完整文档体系**
  - 用户使用手册
  - 开发者技术文档
  - 部署和维护指南
  - API参考文档

### 技术特性 Technical Features
- **架构设计**：模块化、可扩展的架构
- **平台抽象**：统一的跨平台接口
- **配置管理**：YAML配置文件支持
- **日志系统**：分级日志记录和管理
- **权限管理**：安全的权限检查和提升
- **错误处理**：完善的异常处理机制
- **性能优化**：启动时间 < 1秒，内存使用 < 100MB

### 安全特性 Security Features
- **三级确认系统**：防止误操作的多重确认
- **自动备份**：操作前自动创建系统备份
- **权限控制**：严格的权限检查和管理
- **审计日志**：详细的操作记录和追踪
- **数据加密**：敏感数据的加密存储
- **合规提醒**：法律使用条款和安全警告

### 性能指标 Performance Metrics
- **启动时间**：< 1秒
- **界面响应**：< 200ms（标签切换）
- **数据刷新**：< 2秒（系统信息）
- **内存使用**：< 100MB（基础功能）
- **磁盘占用**：< 50MB（完整安装）

## [1.0.0-rc.1] - 2024-01-14

### 新增 Added
- 完成最终测试和文档
- 添加用户体验测试
- 完善国际化支持

### 修复 Fixed
- 修复PyQt5导入问题
- 优化响应式布局性能
- 改进错误处理机制

### 变更 Changed
- 更新文档结构
- 优化界面布局
- 改进测试覆盖率

## [1.0.0-beta.3] - 2024-01-13

### 新增 Added
- 三级确认系统
- 完善的帮助系统
- 实际备份引擎集成

### 修复 Fixed
- 修复备份文件格式问题
- 解决权限检查错误
- 优化内存使用

### 变更 Changed
- 改进确认对话框设计
- 更新帮助内容
- 优化备份性能

## [1.0.0-beta.2] - 2024-01-12

### 新增 Added
- 用户界面框架
- 主窗口和功能控件
- 设置对话框系统

### 修复 Fixed
- 修复界面布局问题
- 解决控件响应问题
- 优化界面性能

### 变更 Changed
- 改进界面设计
- 更新控件样式
- 优化用户体验

## [1.0.0-beta.1] - 2024-01-11

### 新增 Added
- GUI框架集成
- PyQt5界面支持
- 基础界面组件

### 修复 Fixed
- 修复依赖包问题
- 解决导入路径错误
- 优化启动流程

## [1.0.0-alpha.4] - 2024-01-09

### 新增 Added
- 完整的跨平台支持
- Linux平台适配
- 统一的平台接口

### 修复 Fixed
- 修复macOS权限问题
- 解决Linux网络接口检测
- 优化跨平台兼容性

### 变更 Changed
- 改进平台抽象层
- 更新接口定义
- 优化错误处理

## [1.0.0-alpha.3] - 2024-01-08

### 新增 Added
- macOS平台支持
- 系统信息检测
- 网络配置管理

### 修复 Fixed
- 修复macOS API调用问题
- 解决权限提升错误
- 优化系统兼容性

### 变更 Changed
- 改进平台检测逻辑
- 更新API接口
- 优化性能表现

## [1.0.0-alpha.2] - 2024-01-07

### 新增 Added
- Windows平台完整支持
- WMI查询功能
- 注册表操作支持

### 修复 Fixed
- 修复Windows API调用错误
- 解决权限检查问题
- 优化注册表操作

### 变更 Changed
- 改进Windows平台实现
- 更新错误处理机制
- 优化日志记录

## [1.0.0-alpha.1] - 2024-01-06

### 新增 Added
- 核心功能开发
- 设备指纹识别引擎
- 权限管理系统

### 修复 Fixed
- 修复核心模块错误
- 解决配置加载问题
- 优化模块依赖

### 变更 Changed
- 改进核心架构
- 更新模块接口
- 优化代码结构

## [0.3.0] - 2024-01-05

### 新增 Added
- 平台抽象层设计
- 接口定义完善
- 模块结构优化

### 修复 Fixed
- 修复架构设计问题
- 解决模块耦合
- 优化接口定义

### 变更 Changed
- 重构平台抽象层
- 更新接口规范
- 改进模块设计

## [0.2.0] - 2024-01-04

### 新增 Added
- 系统架构设计
- 核心模块框架
- 配置管理系统

### 修复 Fixed
- 修复配置文件格式
- 解决模块加载问题
- 优化日志系统

### 变更 Changed
- 改进架构设计
- 更新配置格式
- 优化模块结构

## [0.1.0] - 2024-01-03

### 新增 Added
- 项目初始化
- 基础框架搭建
- 开发环境配置

### 修复 Fixed
- 修复初始化脚本
- 解决依赖问题
- 优化项目结构

### 变更 Changed
- 建立项目结构
- 配置开发环境
- 初始化代码库

## [0.0.1] - 2024-01-01

### 新增 Added
- 项目创建
- 需求分析
- 技术可行性验证

---

## 版本说明 Version Notes

### 版本命名规则
- **主版本号**：不兼容的API修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 发布类型
- **正式版本**：如 1.0.0，稳定的生产版本
- **候选版本**：如 1.0.0-rc.1，发布候选版本
- **测试版本**：如 1.0.0-beta.1，功能测试版本
- **开发版本**：如 1.0.0-alpha.1，早期开发版本

### 支持策略
- **当前版本**：完整支持和更新
- **前一版本**：安全更新和重要修复
- **更早版本**：不再提供支持

---

**注意**：本变更日志遵循[Keep a Changelog](https://keepachangelog.com/)格式，所有重要变更都会在此记录。
